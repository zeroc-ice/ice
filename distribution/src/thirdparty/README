======================================================================
Introduction
======================================================================

This archive contains the source code distributions, including any
source patches, for the third-party packages required to build Ice.

This document provides instructions for applying patches and for
configuring the third-party packages on each of the supported
platforms.

For more information about the third-party dependencies, please refer
to the links below:

STLport        http://www.stlport.org
Berkeley DB    http://www.oracle.com/database/berkeley-db/index.html
expat          http://expat.sourceforge.net
OpenSSL        http://www.openssl.org
bzip2          http://sources.redhat.com/bzip2
mcpp           http://mcpp.sourceforge.net


======================================================================
Patches
======================================================================


mcpp
----

The files mcpp/patch.2.7.2_1 and mcpp/patch.2.7.2_2 in this archive
contain several important fixes required by Ice. We expect that these
changes will be included in a future release of mcpp.

After extracting the mcpp source distribution, change to the top-level
directory and apply the patch as shown below:

  $ cd mcpp-2.7.2
  $ patch -p0 < patch.2.7.2_1
  $ patch -p0 < patch.2.7.2_2

Follow the platform-specific instructions below for configuring and
building mcpp


======================================================================
Instructions for Linux
======================================================================

If a third-party package is not listed below, there are no special
requirements for configuring or building that package.


Berkeley DB
-----------

Berkeley DB must be configured with C++ support enabled. If you intend
to use Ice for Java with Berkeley DB, you must also enable Java
support:

  $ ../dist/configure --enable-cxx
  (plus --prefix=<dir> and/or --enable-java if you like)
  $ gmake


mcpp
----

Ice requires the library version of mcpp, so configure mcpp as shown
below:

  $ ./configure CFLAGS=-fPIC --enable-mcpplib --disable-shared
  (and --prefix=<dir> if you like)

On 64-bit platforms, after installation it is necessary to rename the
library installation directory from $(prefix)/lib to $(prefix>/lib64.


======================================================================
Instructions for Mac OS X
======================================================================

If a third-party package is not listed below, there are no special
requirements for configuring or building that package.


Berkeley DB
-----------

Berkeley DB must be configured with C++ support enabled. If you intend
to use Ice for Java with Berkeley DB, you must also enable Java
support:

  $ ../dist/configure --enable-cxx
  (plus --prefix=<dir> and/or --enable-java if you like)
  $ gmake


mcpp
----

Ice requires the library version of mcpp, so configure mcpp as shown
below:

  $ ./configure CFLAGS=-fno-common --enable-mcpplib --disable-shared
  (and --prefix=<dir> if you like)


======================================================================
Instructions for Solaris
======================================================================

If a third-party package is not listed below, there are no special
requirements for configuring or building that package.


Berkeley DB
-----------

Berkeley DB must be configured with C++ support enabled. If you intend
to use Ice for Java with Berkeley DB, you must also enable Java
support:

  $ ../dist/configure --enable-cxx --with-mutex=POSIX/pthreads
  (plus --prefix=<dir> and/or --enable-java if you like)
  $ gmake

For 64-bit builds, use:

  $ export CFLAGS="-O -m64"
  $ export CXXFLAGS="-O -m64"
  $ export LDFLAGS="-m64
  $ ../dist/configure --enable-cxx
  (plus --prefix=<dir> and/or --enable-java if you like)
  $ gmake


OpenSSL
-------

OpenSSL is included with the Solaris 10 operating system and is
installed in /usr/sfw. If you want to use this version of OpenSSL
with Ice, we recommend that you also install the "Solaris 10
Encryption Kit" available from:

  http://www.sun.com/download/index.jsp?cat=Security&tab=3&subcat=Cryptography%20%26%20Encryption

This kit is required to run the IceSSL tests successfully.


expat
-----

expat is included with the Solaris 10 operating system and is
installed in /usr/sfw.


mcpp
----

Ice requires the library version of mcpp, so configure mcpp as shown
below:

  $ ./configure CFLAGS=-fPIC --enable-mcpplib --disable-shared
  (and --prefix=<dir> if you like)

For 64-bit builds, use:

  $ ./configure CFLAGS="-fPIC -m64" --enable-mcpplib --disable-shared
  (and --prefix=<dir> if you like)

On 64-bit platforms, after installation it is necessary to rename the
library installation directory from $(prefix)/lib to
$(prefix)/lib/sparcv9 for SPARC or $(prefix)/lib/amd64 for x86.
