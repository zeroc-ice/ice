//
// Copyright (c) ZeroC, Inc. All rights reserved.
//

using System;

namespace Ice
{
    // Extends the partial exception classes generated by the Slice compiler.

    public partial class RequestFailedException
    {
        protected virtual string DefaultIceMessage
            => Facet.Length == 0 ? $"Request for operation `{Operation}' on Ice object `{Id}' failed."
                : $"Request for operation `{Operation}' on Ice object `{Id}' with facet `{Facet}' failed.";

        public override string Message => IceMessage.Length > 0 ? IceMessage : DefaultIceMessage;

        public RequestFailedException(Identity id, string facet, string operation,
                                      System.Exception innerException)
            : base(innerException)
        {
            Id = id;
            Facet = facet;
            Operation = operation;
            IceMessage = "";
        }
    }

    public partial class ObjectNotExistException
    {
        protected override string DefaultIceMessage
            => $"Could not find servant for Ice object `{Id}'" + (Facet.Length > 0 ? $" with facet `{Facet}'" : "") +
                $" while attempting to call operation `{Operation}'.";

        public ObjectNotExistException(Identity id, string facet, string operation)
            : base(id, facet, operation, "")
        {
        }
    }

    public partial class OperationNotExistException
    {
        protected override string DefaultIceMessage
            => $"Could not find operation `{Operation}' for Ice object `{Id}'" +
                (Facet.Length > 0 ? $" with facet `{Facet}'." : ".");

        public OperationNotExistException(Identity id, string facet, string operation)
            : base(id, facet, operation, "")
        {
        }
    }

    public partial class UnhandledException
    {
        public UnhandledException(Identity id, string facet, string operation, System.Exception innerException)
            : base(id, facet, operation, innerException)
        {
            IceMessage =  $"Unhandled exception while calling `{Operation}' on Ice object `{Id}'";
            if (Facet.Length > 0)
            {
                IceMessage += $" with facet `{Facet}'";
            }
            IceMessage += $":\n {innerException}";
        }
    }
}
