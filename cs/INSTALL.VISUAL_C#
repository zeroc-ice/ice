Build instructions
------------------

The code has been built and tested with Visual C# Version 7.1.3088 and
.NET Framework 1.1 Version 1.1.4322.

Unpack the archive. The sources will be contained in the 
IceCS-@ver@ subdirectory.

You will need the Slice to C# translator and supporting executables
and libraries. You can download a binary distribution from the ZeroC
web site, or you can build Ice for C++ yourself.

Binary distributions for the supported platforms are available at

http://www.zeroc.com/download.html

Make sure that the directory containing slice2cs is in your PATH. Note
that icecpp.exe must be in your path as well, as must be the Ice for
C++ run-time libraries iceutil and slice.

Open All.sln in Visual C# and build the "All" solution (both
debug and release builds are supported).

Note: The first time you build, you will most likely find that you get
errors for the following projects:

 * adapterDeactivationCOL
 * adapterDeactivationS
 * icegridsimpleC

The work-around is to rebuild (not build) these projects individually
once you have seen the errors. Thereafter, building the projects seems
to work fine. (If someone knows how to work around this bug in Visual
Studio, please let us know!)


Running the tests
-----------------

To run the tests, you will need Python:

http://www.python.org/download

Run "python allTests.py" from the top-level directory to run all of the
tests, or "python allTests.py -l" to run the tests in an endless loop.

You can also run individual tests in the various test directories with
"python run.py".

If you have the Mono run time installed under Windows (see
INSTALL.MONO), you can also execute the tests using the Mono run time
(instead of the .NET run time). To do this, add the -m option to
allTests.py or run.py.


Running the demos
-----------------

To run the demos, you need to have the Ice bin directory in your PATH.
See the README file in each demo directory for a description of each
demo.


Installation
------------

You can copy the generated bin/icecs.dll file where you want it
and then reference it in your appliation code.

Alternatively, you can add icecs.dll to the global assembly cache. To
do this, open Explorer and navigate to C:\WINDOWS\assembly. Then drag
and drop (or copy and paste) icecs.dll into the right-hand pane to
install it in the cache.

Or you can use gacutil from the command line to achieve the same
thing:

    gacutil /i "path_to_icecs.dll"

You can find gacutil.exe in the SDK\Tools\Bin folder of your Visual C#
installation. For example, assuming that you have installed Visual C#
in C:\Program Files, the path to gacutil is

    C:\Program Files\Microsoft Visual Studio .NET 2003\SDK\v1.1\Bin\gacutil.exe

Once installed in the cache, the assembly will always be located
correctly without having to set environment variables or copying it
into the directory of a .exe.

If you want line numbers for stack traces, you must also install the
icecs.pdb file in the GAC. Unfortunately, you cannot do this using
Explorer, so you have to do it from the command line. Open a command
shell window and navigate to C:\WINDOWS\assembly\GAC\icecs. (Assuming
C:\WINDOWS is your system root.) Doing a directory listing there, you
will find a directory named @ver@__<UUID>, for example:

    @ver@__1f998c50fec78381

Change to that directory (making sure that you use the correct version
number for this release of Ice). In this directory, you will a file
called __AssemblyInfo__.ini and the icecs.dll you installed into the
GAC in the preceding step. Now copy the icecs.pdb file into this
directory:

    copy <path_to_icecs.pdb> .
